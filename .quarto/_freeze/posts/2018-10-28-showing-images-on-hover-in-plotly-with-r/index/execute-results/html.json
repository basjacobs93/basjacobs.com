{
  "hash": "94062e66380f1e36cf1d2157b59de9aa",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Showing images on hover in Plotly with R\nauthor: Bas\ndate: '2018-10-28'\n---\n\nFor a project I was working on recently, I wanted to turn a `ggplot` scatterplot into an interactive visualisation: when hovering over a point, a corresponding image needed to be shown. I did not want to use Shiny, since I required the visualisation to be portable. This is possible by [manually tinkering with html](\nhttps://github.com/etpinard/plotly-dashboards/tree/master/hover-images), but using the `plotly` and `htmlwidgets` packages, I was able to achieve what I wanted without the need to leave the comfy RStudio environment, and without needing to host the plot on the plot.ly website.  \n\nThe [plotly](https://plot.ly/r/) library provides the useful `ggplotly` function to make static plots interactive with just one line of code. If we apply it to a `ggplot` of the famous `iris` dataset, it looks like this.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(plotly)\n\ng <- ggplot(iris, aes(x = Sepal.Length,\n                      y = Petal.Length,\n                      color = Species)) + geom_point()\np <- ggplotly(g) %>% partial_bundle()\n\np\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-f8f3cbd2dc0ae2616e4a\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-f8f3cbd2dc0ae2616e4a\">{\"x\":{\"data\":[{\"x\":[5.0999999999999996,4.9000000000000004,4.7000000000000002,4.5999999999999996,5,5.4000000000000004,4.5999999999999996,5,4.4000000000000004,4.9000000000000004,5.4000000000000004,4.7999999999999998,4.7999999999999998,4.2999999999999998,5.7999999999999998,5.7000000000000002,5.4000000000000004,5.0999999999999996,5.7000000000000002,5.0999999999999996,5.4000000000000004,5.0999999999999996,4.5999999999999996,5.0999999999999996,4.7999999999999998,5,5,5.2000000000000002,5.2000000000000002,4.7000000000000002,4.7999999999999998,5.4000000000000004,5.2000000000000002,5.5,4.9000000000000004,5,5.5,4.9000000000000004,4.4000000000000004,5.0999999999999996,5,4.5,4.4000000000000004,5,5.0999999999999996,4.7999999999999998,5.0999999999999996,4.5999999999999996,5.2999999999999998,5],\"y\":[1.3999999999999999,1.3999999999999999,1.3,1.5,1.3999999999999999,1.7,1.3999999999999999,1.5,1.3999999999999999,1.5,1.5,1.6000000000000001,1.3999999999999999,1.1000000000000001,1.2,1.5,1.3,1.3999999999999999,1.7,1.5,1.7,1.5,1,1.7,1.8999999999999999,1.6000000000000001,1.6000000000000001,1.5,1.3999999999999999,1.6000000000000001,1.6000000000000001,1.5,1.5,1.3999999999999999,1.5,1.2,1.3,1.3999999999999999,1.3,1.5,1.3,1.3,1.3,1.6000000000000001,1.8999999999999999,1.3999999999999999,1.6000000000000001,1.3999999999999999,1.5,1.3999999999999999],\"text\":[\"Sepal.Length: 5.1<br />Petal.Length: 1.4<br />Species: setosa\",\"Sepal.Length: 4.9<br />Petal.Length: 1.4<br />Species: setosa\",\"Sepal.Length: 4.7<br />Petal.Length: 1.3<br />Species: setosa\",\"Sepal.Length: 4.6<br />Petal.Length: 1.5<br />Species: setosa\",\"Sepal.Length: 5.0<br />Petal.Length: 1.4<br />Species: setosa\",\"Sepal.Length: 5.4<br />Petal.Length: 1.7<br />Species: setosa\",\"Sepal.Length: 4.6<br />Petal.Length: 1.4<br />Species: setosa\",\"Sepal.Length: 5.0<br />Petal.Length: 1.5<br />Species: setosa\",\"Sepal.Length: 4.4<br />Petal.Length: 1.4<br />Species: setosa\",\"Sepal.Length: 4.9<br />Petal.Length: 1.5<br />Species: setosa\",\"Sepal.Length: 5.4<br />Petal.Length: 1.5<br />Species: setosa\",\"Sepal.Length: 4.8<br />Petal.Length: 1.6<br />Species: setosa\",\"Sepal.Length: 4.8<br />Petal.Length: 1.4<br />Species: setosa\",\"Sepal.Length: 4.3<br />Petal.Length: 1.1<br />Species: setosa\",\"Sepal.Length: 5.8<br />Petal.Length: 1.2<br />Species: setosa\",\"Sepal.Length: 5.7<br />Petal.Length: 1.5<br />Species: setosa\",\"Sepal.Length: 5.4<br />Petal.Length: 1.3<br />Species: setosa\",\"Sepal.Length: 5.1<br />Petal.Length: 1.4<br />Species: setosa\",\"Sepal.Length: 5.7<br />Petal.Length: 1.7<br />Species: setosa\",\"Sepal.Length: 5.1<br />Petal.Length: 1.5<br />Species: setosa\",\"Sepal.Length: 5.4<br />Petal.Length: 1.7<br />Species: setosa\",\"Sepal.Length: 5.1<br />Petal.Length: 1.5<br />Species: setosa\",\"Sepal.Length: 4.6<br />Petal.Length: 1.0<br />Species: setosa\",\"Sepal.Length: 5.1<br />Petal.Length: 1.7<br />Species: setosa\",\"Sepal.Length: 4.8<br />Petal.Length: 1.9<br />Species: setosa\",\"Sepal.Length: 5.0<br />Petal.Length: 1.6<br />Species: setosa\",\"Sepal.Length: 5.0<br />Petal.Length: 1.6<br />Species: setosa\",\"Sepal.Length: 5.2<br />Petal.Length: 1.5<br />Species: setosa\",\"Sepal.Length: 5.2<br />Petal.Length: 1.4<br />Species: setosa\",\"Sepal.Length: 4.7<br />Petal.Length: 1.6<br />Species: setosa\",\"Sepal.Length: 4.8<br />Petal.Length: 1.6<br />Species: setosa\",\"Sepal.Length: 5.4<br />Petal.Length: 1.5<br />Species: setosa\",\"Sepal.Length: 5.2<br />Petal.Length: 1.5<br />Species: setosa\",\"Sepal.Length: 5.5<br />Petal.Length: 1.4<br />Species: setosa\",\"Sepal.Length: 4.9<br />Petal.Length: 1.5<br />Species: setosa\",\"Sepal.Length: 5.0<br />Petal.Length: 1.2<br />Species: setosa\",\"Sepal.Length: 5.5<br />Petal.Length: 1.3<br />Species: setosa\",\"Sepal.Length: 4.9<br />Petal.Length: 1.4<br />Species: setosa\",\"Sepal.Length: 4.4<br />Petal.Length: 1.3<br />Species: setosa\",\"Sepal.Length: 5.1<br />Petal.Length: 1.5<br />Species: setosa\",\"Sepal.Length: 5.0<br />Petal.Length: 1.3<br />Species: setosa\",\"Sepal.Length: 4.5<br />Petal.Length: 1.3<br />Species: setosa\",\"Sepal.Length: 4.4<br />Petal.Length: 1.3<br />Species: setosa\",\"Sepal.Length: 5.0<br />Petal.Length: 1.6<br />Species: setosa\",\"Sepal.Length: 5.1<br />Petal.Length: 1.9<br />Species: setosa\",\"Sepal.Length: 4.8<br />Petal.Length: 1.4<br />Species: setosa\",\"Sepal.Length: 5.1<br />Petal.Length: 1.6<br />Species: setosa\",\"Sepal.Length: 4.6<br />Petal.Length: 1.4<br />Species: setosa\",\"Sepal.Length: 5.3<br />Petal.Length: 1.5<br />Species: setosa\",\"Sepal.Length: 5.0<br />Petal.Length: 1.4<br />Species: setosa\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"opacity\":1,\"size\":5.6692913385826778,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(248,118,109,1)\"}},\"hoveron\":\"points\",\"name\":\"setosa\",\"legendgroup\":\"setosa\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[7,6.4000000000000004,6.9000000000000004,5.5,6.5,5.7000000000000002,6.2999999999999998,4.9000000000000004,6.5999999999999996,5.2000000000000002,5,5.9000000000000004,6,6.0999999999999996,5.5999999999999996,6.7000000000000002,5.5999999999999996,5.7999999999999998,6.2000000000000002,5.5999999999999996,5.9000000000000004,6.0999999999999996,6.2999999999999998,6.0999999999999996,6.4000000000000004,6.5999999999999996,6.7999999999999998,6.7000000000000002,6,5.7000000000000002,5.5,5.5,5.7999999999999998,6,5.4000000000000004,6,6.7000000000000002,6.2999999999999998,5.5999999999999996,5.5,5.5,6.0999999999999996,5.7999999999999998,5,5.5999999999999996,5.7000000000000002,5.7000000000000002,6.2000000000000002,5.0999999999999996,5.7000000000000002],\"y\":[4.7000000000000002,4.5,4.9000000000000004,4,4.5999999999999996,4.5,4.7000000000000002,3.2999999999999998,4.5999999999999996,3.8999999999999999,3.5,4.2000000000000002,4,4.7000000000000002,3.6000000000000001,4.4000000000000004,4.5,4.0999999999999996,4.5,3.8999999999999999,4.7999999999999998,4,4.9000000000000004,4.7000000000000002,4.2999999999999998,4.4000000000000004,4.7999999999999998,5,4.5,3.5,3.7999999999999998,3.7000000000000002,3.8999999999999999,5.0999999999999996,4.5,4.5,4.7000000000000002,4.4000000000000004,4.0999999999999996,4,4.4000000000000004,4.5999999999999996,4,3.2999999999999998,4.2000000000000002,4.2000000000000002,4.2000000000000002,4.2999999999999998,3,4.0999999999999996],\"text\":[\"Sepal.Length: 7.0<br />Petal.Length: 4.7<br />Species: versicolor\",\"Sepal.Length: 6.4<br />Petal.Length: 4.5<br />Species: versicolor\",\"Sepal.Length: 6.9<br />Petal.Length: 4.9<br />Species: versicolor\",\"Sepal.Length: 5.5<br />Petal.Length: 4.0<br />Species: versicolor\",\"Sepal.Length: 6.5<br />Petal.Length: 4.6<br />Species: versicolor\",\"Sepal.Length: 5.7<br />Petal.Length: 4.5<br />Species: versicolor\",\"Sepal.Length: 6.3<br />Petal.Length: 4.7<br />Species: versicolor\",\"Sepal.Length: 4.9<br />Petal.Length: 3.3<br />Species: versicolor\",\"Sepal.Length: 6.6<br />Petal.Length: 4.6<br />Species: versicolor\",\"Sepal.Length: 5.2<br />Petal.Length: 3.9<br />Species: versicolor\",\"Sepal.Length: 5.0<br />Petal.Length: 3.5<br />Species: versicolor\",\"Sepal.Length: 5.9<br />Petal.Length: 4.2<br />Species: versicolor\",\"Sepal.Length: 6.0<br />Petal.Length: 4.0<br />Species: versicolor\",\"Sepal.Length: 6.1<br />Petal.Length: 4.7<br />Species: versicolor\",\"Sepal.Length: 5.6<br />Petal.Length: 3.6<br />Species: versicolor\",\"Sepal.Length: 6.7<br />Petal.Length: 4.4<br />Species: versicolor\",\"Sepal.Length: 5.6<br />Petal.Length: 4.5<br />Species: versicolor\",\"Sepal.Length: 5.8<br />Petal.Length: 4.1<br />Species: versicolor\",\"Sepal.Length: 6.2<br />Petal.Length: 4.5<br />Species: versicolor\",\"Sepal.Length: 5.6<br />Petal.Length: 3.9<br />Species: versicolor\",\"Sepal.Length: 5.9<br />Petal.Length: 4.8<br />Species: versicolor\",\"Sepal.Length: 6.1<br />Petal.Length: 4.0<br />Species: versicolor\",\"Sepal.Length: 6.3<br />Petal.Length: 4.9<br />Species: versicolor\",\"Sepal.Length: 6.1<br />Petal.Length: 4.7<br />Species: versicolor\",\"Sepal.Length: 6.4<br />Petal.Length: 4.3<br />Species: versicolor\",\"Sepal.Length: 6.6<br />Petal.Length: 4.4<br />Species: versicolor\",\"Sepal.Length: 6.8<br />Petal.Length: 4.8<br />Species: versicolor\",\"Sepal.Length: 6.7<br />Petal.Length: 5.0<br />Species: versicolor\",\"Sepal.Length: 6.0<br />Petal.Length: 4.5<br />Species: versicolor\",\"Sepal.Length: 5.7<br />Petal.Length: 3.5<br />Species: versicolor\",\"Sepal.Length: 5.5<br />Petal.Length: 3.8<br />Species: versicolor\",\"Sepal.Length: 5.5<br />Petal.Length: 3.7<br />Species: versicolor\",\"Sepal.Length: 5.8<br />Petal.Length: 3.9<br />Species: versicolor\",\"Sepal.Length: 6.0<br />Petal.Length: 5.1<br />Species: versicolor\",\"Sepal.Length: 5.4<br />Petal.Length: 4.5<br />Species: versicolor\",\"Sepal.Length: 6.0<br />Petal.Length: 4.5<br />Species: versicolor\",\"Sepal.Length: 6.7<br />Petal.Length: 4.7<br />Species: versicolor\",\"Sepal.Length: 6.3<br />Petal.Length: 4.4<br />Species: versicolor\",\"Sepal.Length: 5.6<br />Petal.Length: 4.1<br />Species: versicolor\",\"Sepal.Length: 5.5<br />Petal.Length: 4.0<br />Species: versicolor\",\"Sepal.Length: 5.5<br />Petal.Length: 4.4<br />Species: versicolor\",\"Sepal.Length: 6.1<br />Petal.Length: 4.6<br />Species: versicolor\",\"Sepal.Length: 5.8<br />Petal.Length: 4.0<br />Species: versicolor\",\"Sepal.Length: 5.0<br />Petal.Length: 3.3<br />Species: versicolor\",\"Sepal.Length: 5.6<br />Petal.Length: 4.2<br />Species: versicolor\",\"Sepal.Length: 5.7<br />Petal.Length: 4.2<br />Species: versicolor\",\"Sepal.Length: 5.7<br />Petal.Length: 4.2<br />Species: versicolor\",\"Sepal.Length: 6.2<br />Petal.Length: 4.3<br />Species: versicolor\",\"Sepal.Length: 5.1<br />Petal.Length: 3.0<br />Species: versicolor\",\"Sepal.Length: 5.7<br />Petal.Length: 4.1<br />Species: versicolor\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,186,56,1)\",\"opacity\":1,\"size\":5.6692913385826778,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,186,56,1)\"}},\"hoveron\":\"points\",\"name\":\"versicolor\",\"legendgroup\":\"versicolor\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[6.2999999999999998,5.7999999999999998,7.0999999999999996,6.2999999999999998,6.5,7.5999999999999996,4.9000000000000004,7.2999999999999998,6.7000000000000002,7.2000000000000002,6.5,6.4000000000000004,6.7999999999999998,5.7000000000000002,5.7999999999999998,6.4000000000000004,6.5,7.7000000000000002,7.7000000000000002,6,6.9000000000000004,5.5999999999999996,7.7000000000000002,6.2999999999999998,6.7000000000000002,7.2000000000000002,6.2000000000000002,6.0999999999999996,6.4000000000000004,7.2000000000000002,7.4000000000000004,7.9000000000000004,6.4000000000000004,6.2999999999999998,6.0999999999999996,7.7000000000000002,6.2999999999999998,6.4000000000000004,6,6.9000000000000004,6.7000000000000002,6.9000000000000004,5.7999999999999998,6.7999999999999998,6.7000000000000002,6.7000000000000002,6.2999999999999998,6.5,6.2000000000000002,5.9000000000000004],\"y\":[6,5.0999999999999996,5.9000000000000004,5.5999999999999996,5.7999999999999998,6.5999999999999996,4.5,6.2999999999999998,5.7999999999999998,6.0999999999999996,5.0999999999999996,5.2999999999999998,5.5,5,5.0999999999999996,5.2999999999999998,5.5,6.7000000000000002,6.9000000000000004,5,5.7000000000000002,4.9000000000000004,6.7000000000000002,4.9000000000000004,5.7000000000000002,6,4.7999999999999998,4.9000000000000004,5.5999999999999996,5.7999999999999998,6.0999999999999996,6.4000000000000004,5.5999999999999996,5.0999999999999996,5.5999999999999996,6.0999999999999996,5.5999999999999996,5.5,4.7999999999999998,5.4000000000000004,5.5999999999999996,5.0999999999999996,5.0999999999999996,5.9000000000000004,5.7000000000000002,5.2000000000000002,5,5.2000000000000002,5.4000000000000004,5.0999999999999996],\"text\":[\"Sepal.Length: 6.3<br />Petal.Length: 6.0<br />Species: virginica\",\"Sepal.Length: 5.8<br />Petal.Length: 5.1<br />Species: virginica\",\"Sepal.Length: 7.1<br />Petal.Length: 5.9<br />Species: virginica\",\"Sepal.Length: 6.3<br />Petal.Length: 5.6<br />Species: virginica\",\"Sepal.Length: 6.5<br />Petal.Length: 5.8<br />Species: virginica\",\"Sepal.Length: 7.6<br />Petal.Length: 6.6<br />Species: virginica\",\"Sepal.Length: 4.9<br />Petal.Length: 4.5<br />Species: virginica\",\"Sepal.Length: 7.3<br />Petal.Length: 6.3<br />Species: virginica\",\"Sepal.Length: 6.7<br />Petal.Length: 5.8<br />Species: virginica\",\"Sepal.Length: 7.2<br />Petal.Length: 6.1<br />Species: virginica\",\"Sepal.Length: 6.5<br />Petal.Length: 5.1<br />Species: virginica\",\"Sepal.Length: 6.4<br />Petal.Length: 5.3<br />Species: virginica\",\"Sepal.Length: 6.8<br />Petal.Length: 5.5<br />Species: virginica\",\"Sepal.Length: 5.7<br />Petal.Length: 5.0<br />Species: virginica\",\"Sepal.Length: 5.8<br />Petal.Length: 5.1<br />Species: virginica\",\"Sepal.Length: 6.4<br />Petal.Length: 5.3<br />Species: virginica\",\"Sepal.Length: 6.5<br />Petal.Length: 5.5<br />Species: virginica\",\"Sepal.Length: 7.7<br />Petal.Length: 6.7<br />Species: virginica\",\"Sepal.Length: 7.7<br />Petal.Length: 6.9<br />Species: virginica\",\"Sepal.Length: 6.0<br />Petal.Length: 5.0<br />Species: virginica\",\"Sepal.Length: 6.9<br />Petal.Length: 5.7<br />Species: virginica\",\"Sepal.Length: 5.6<br />Petal.Length: 4.9<br />Species: virginica\",\"Sepal.Length: 7.7<br />Petal.Length: 6.7<br />Species: virginica\",\"Sepal.Length: 6.3<br />Petal.Length: 4.9<br />Species: virginica\",\"Sepal.Length: 6.7<br />Petal.Length: 5.7<br />Species: virginica\",\"Sepal.Length: 7.2<br />Petal.Length: 6.0<br />Species: virginica\",\"Sepal.Length: 6.2<br />Petal.Length: 4.8<br />Species: virginica\",\"Sepal.Length: 6.1<br />Petal.Length: 4.9<br />Species: virginica\",\"Sepal.Length: 6.4<br />Petal.Length: 5.6<br />Species: virginica\",\"Sepal.Length: 7.2<br />Petal.Length: 5.8<br />Species: virginica\",\"Sepal.Length: 7.4<br />Petal.Length: 6.1<br />Species: virginica\",\"Sepal.Length: 7.9<br />Petal.Length: 6.4<br />Species: virginica\",\"Sepal.Length: 6.4<br />Petal.Length: 5.6<br />Species: virginica\",\"Sepal.Length: 6.3<br />Petal.Length: 5.1<br />Species: virginica\",\"Sepal.Length: 6.1<br />Petal.Length: 5.6<br />Species: virginica\",\"Sepal.Length: 7.7<br />Petal.Length: 6.1<br />Species: virginica\",\"Sepal.Length: 6.3<br />Petal.Length: 5.6<br />Species: virginica\",\"Sepal.Length: 6.4<br />Petal.Length: 5.5<br />Species: virginica\",\"Sepal.Length: 6.0<br />Petal.Length: 4.8<br />Species: virginica\",\"Sepal.Length: 6.9<br />Petal.Length: 5.4<br />Species: virginica\",\"Sepal.Length: 6.7<br />Petal.Length: 5.6<br />Species: virginica\",\"Sepal.Length: 6.9<br />Petal.Length: 5.1<br />Species: virginica\",\"Sepal.Length: 5.8<br />Petal.Length: 5.1<br />Species: virginica\",\"Sepal.Length: 6.8<br />Petal.Length: 5.9<br />Species: virginica\",\"Sepal.Length: 6.7<br />Petal.Length: 5.7<br />Species: virginica\",\"Sepal.Length: 6.7<br />Petal.Length: 5.2<br />Species: virginica\",\"Sepal.Length: 6.3<br />Petal.Length: 5.0<br />Species: virginica\",\"Sepal.Length: 6.5<br />Petal.Length: 5.2<br />Species: virginica\",\"Sepal.Length: 6.2<br />Petal.Length: 5.4<br />Species: virginica\",\"Sepal.Length: 5.9<br />Petal.Length: 5.1<br />Species: virginica\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(97,156,255,1)\",\"opacity\":1,\"size\":5.6692913385826778,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(97,156,255,1)\"}},\"hoveron\":\"points\",\"name\":\"virginica\",\"legendgroup\":\"virginica\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":26.228310502283108,\"r\":7.3059360730593621,\"b\":40.182648401826498,\"l\":31.415525114155255},\"plot_bgcolor\":\"rgba(235,235,235,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[4.1200000000000001,8.0800000000000001],\"tickmode\":\"array\",\"ticktext\":[\"5\",\"6\",\"7\",\"8\"],\"tickvals\":[5,6,7,8],\"categoryorder\":\"array\",\"categoryarray\":[\"5\",\"6\",\"7\",\"8\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Sepal.Length\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.70499999999999996,7.1950000000000003],\"tickmode\":\"array\",\"ticktext\":[\"2\",\"4\",\"6\"],\"tickvals\":[2,4,6],\"categoryorder\":\"array\",\"categoryarray\":[\"2\",\"4\",\"6\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Petal.Length\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"Species\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"140bb2d02934d\":{\"x\":{},\"y\":{},\"colour\":{},\"type\":\"scatter\"}},\"cur_data\":\"140bb2d02934d\",\"visdat\":{\"140bb2d02934d\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\nAmong other things, we can now hover over a point on the graph and in the tooltip receive information about the corresponding data point. By default, the information displayed is exactly the information we define in the `aes` mapping. If we want other information, we can add it in the `text` aesthetic, which plotly can read. If we provide `ggplotly` with the `tooltip = \"text\"` option, this aesthetic is the only thing that is shown.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ng <- ggplot(iris, aes(x = Sepal.Length,\n                      y = Petal.Length,\n                      color = Species,\n                      text = Species)) + geom_point()\np <- ggplotly(g, tooltip = \"text\") %>% partial_bundle() \n\np\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-8bf2547fe7ff94b1917a\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-8bf2547fe7ff94b1917a\">{\"x\":{\"data\":[{\"x\":[5.0999999999999996,4.9000000000000004,4.7000000000000002,4.5999999999999996,5,5.4000000000000004,4.5999999999999996,5,4.4000000000000004,4.9000000000000004,5.4000000000000004,4.7999999999999998,4.7999999999999998,4.2999999999999998,5.7999999999999998,5.7000000000000002,5.4000000000000004,5.0999999999999996,5.7000000000000002,5.0999999999999996,5.4000000000000004,5.0999999999999996,4.5999999999999996,5.0999999999999996,4.7999999999999998,5,5,5.2000000000000002,5.2000000000000002,4.7000000000000002,4.7999999999999998,5.4000000000000004,5.2000000000000002,5.5,4.9000000000000004,5,5.5,4.9000000000000004,4.4000000000000004,5.0999999999999996,5,4.5,4.4000000000000004,5,5.0999999999999996,4.7999999999999998,5.0999999999999996,4.5999999999999996,5.2999999999999998,5],\"y\":[1.3999999999999999,1.3999999999999999,1.3,1.5,1.3999999999999999,1.7,1.3999999999999999,1.5,1.3999999999999999,1.5,1.5,1.6000000000000001,1.3999999999999999,1.1000000000000001,1.2,1.5,1.3,1.3999999999999999,1.7,1.5,1.7,1.5,1,1.7,1.8999999999999999,1.6000000000000001,1.6000000000000001,1.5,1.3999999999999999,1.6000000000000001,1.6000000000000001,1.5,1.5,1.3999999999999999,1.5,1.2,1.3,1.3999999999999999,1.3,1.5,1.3,1.3,1.3,1.6000000000000001,1.8999999999999999,1.3999999999999999,1.6000000000000001,1.3999999999999999,1.5,1.3999999999999999],\"text\":\"setosa\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"opacity\":1,\"size\":5.6692913385826778,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(248,118,109,1)\"}},\"hoveron\":\"points\",\"name\":\"setosa\",\"legendgroup\":\"setosa\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[7,6.4000000000000004,6.9000000000000004,5.5,6.5,5.7000000000000002,6.2999999999999998,4.9000000000000004,6.5999999999999996,5.2000000000000002,5,5.9000000000000004,6,6.0999999999999996,5.5999999999999996,6.7000000000000002,5.5999999999999996,5.7999999999999998,6.2000000000000002,5.5999999999999996,5.9000000000000004,6.0999999999999996,6.2999999999999998,6.0999999999999996,6.4000000000000004,6.5999999999999996,6.7999999999999998,6.7000000000000002,6,5.7000000000000002,5.5,5.5,5.7999999999999998,6,5.4000000000000004,6,6.7000000000000002,6.2999999999999998,5.5999999999999996,5.5,5.5,6.0999999999999996,5.7999999999999998,5,5.5999999999999996,5.7000000000000002,5.7000000000000002,6.2000000000000002,5.0999999999999996,5.7000000000000002],\"y\":[4.7000000000000002,4.5,4.9000000000000004,4,4.5999999999999996,4.5,4.7000000000000002,3.2999999999999998,4.5999999999999996,3.8999999999999999,3.5,4.2000000000000002,4,4.7000000000000002,3.6000000000000001,4.4000000000000004,4.5,4.0999999999999996,4.5,3.8999999999999999,4.7999999999999998,4,4.9000000000000004,4.7000000000000002,4.2999999999999998,4.4000000000000004,4.7999999999999998,5,4.5,3.5,3.7999999999999998,3.7000000000000002,3.8999999999999999,5.0999999999999996,4.5,4.5,4.7000000000000002,4.4000000000000004,4.0999999999999996,4,4.4000000000000004,4.5999999999999996,4,3.2999999999999998,4.2000000000000002,4.2000000000000002,4.2000000000000002,4.2999999999999998,3,4.0999999999999996],\"text\":\"versicolor\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,186,56,1)\",\"opacity\":1,\"size\":5.6692913385826778,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,186,56,1)\"}},\"hoveron\":\"points\",\"name\":\"versicolor\",\"legendgroup\":\"versicolor\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[6.2999999999999998,5.7999999999999998,7.0999999999999996,6.2999999999999998,6.5,7.5999999999999996,4.9000000000000004,7.2999999999999998,6.7000000000000002,7.2000000000000002,6.5,6.4000000000000004,6.7999999999999998,5.7000000000000002,5.7999999999999998,6.4000000000000004,6.5,7.7000000000000002,7.7000000000000002,6,6.9000000000000004,5.5999999999999996,7.7000000000000002,6.2999999999999998,6.7000000000000002,7.2000000000000002,6.2000000000000002,6.0999999999999996,6.4000000000000004,7.2000000000000002,7.4000000000000004,7.9000000000000004,6.4000000000000004,6.2999999999999998,6.0999999999999996,7.7000000000000002,6.2999999999999998,6.4000000000000004,6,6.9000000000000004,6.7000000000000002,6.9000000000000004,5.7999999999999998,6.7999999999999998,6.7000000000000002,6.7000000000000002,6.2999999999999998,6.5,6.2000000000000002,5.9000000000000004],\"y\":[6,5.0999999999999996,5.9000000000000004,5.5999999999999996,5.7999999999999998,6.5999999999999996,4.5,6.2999999999999998,5.7999999999999998,6.0999999999999996,5.0999999999999996,5.2999999999999998,5.5,5,5.0999999999999996,5.2999999999999998,5.5,6.7000000000000002,6.9000000000000004,5,5.7000000000000002,4.9000000000000004,6.7000000000000002,4.9000000000000004,5.7000000000000002,6,4.7999999999999998,4.9000000000000004,5.5999999999999996,5.7999999999999998,6.0999999999999996,6.4000000000000004,5.5999999999999996,5.0999999999999996,5.5999999999999996,6.0999999999999996,5.5999999999999996,5.5,4.7999999999999998,5.4000000000000004,5.5999999999999996,5.0999999999999996,5.0999999999999996,5.9000000000000004,5.7000000000000002,5.2000000000000002,5,5.2000000000000002,5.4000000000000004,5.0999999999999996],\"text\":\"virginica\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(97,156,255,1)\",\"opacity\":1,\"size\":5.6692913385826778,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(97,156,255,1)\"}},\"hoveron\":\"points\",\"name\":\"virginica\",\"legendgroup\":\"virginica\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":26.228310502283108,\"r\":7.3059360730593621,\"b\":40.182648401826498,\"l\":31.415525114155255},\"plot_bgcolor\":\"rgba(235,235,235,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[4.1200000000000001,8.0800000000000001],\"tickmode\":\"array\",\"ticktext\":[\"5\",\"6\",\"7\",\"8\"],\"tickvals\":[5,6,7,8],\"categoryorder\":\"array\",\"categoryarray\":[\"5\",\"6\",\"7\",\"8\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Sepal.Length\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.70499999999999996,7.1950000000000003],\"tickmode\":\"array\",\"ticktext\":[\"2\",\"4\",\"6\"],\"tickvals\":[2,4,6],\"categoryorder\":\"array\",\"categoryarray\":[\"2\",\"4\",\"6\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Petal.Length\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"Species\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"140bb2d699b4c\":{\"x\":{},\"y\":{},\"colour\":{},\"text\":{},\"type\":\"scatter\"}},\"cur_data\":\"140bb2d699b4c\",\"visdat\":{\"140bb2d699b4c\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\nThis already looks nice and clean. As can be seen [in the plotly documentation](https://plot.ly/r/hover-events/), a custom JavaScript function can be called when hovering over a point, and the tooltip text can be retrieved in this function. However, other than in the documentation, we do not need to change any html code or write long JavaScript code; using the `htmltools::onRender` function we can inject a custom JavaScript function into the generated plot.  \nIn this example, I chose to store the images locally, but one can also use base64 objects like in the documentation to make it even more portable.  \n\nWe define a function that takes a plotly element and calls another function when hovering over this element. The point's tooltip can be retrieved with `d.points[0].data.text`. Since we made this nice and clean, this is the corresponding plant's species as a string. Locally, I have stored the images in the folder corresponding to this blogpost, with filenames `setosa.jpg`, `virginica.jpg` and `versicolor.jpg`. The path to the correct image is constructed and assigned to the `image_location` variable.  \nNext, we define an object which points to the correct image and defines the position and the size we want the image to take.  \nFinally, by calling `Plotly.relayout` the new layout is applied in which we attach this image object in the layout's `images` attribute.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np %>% htmlwidgets::onRender(\"\n    function(el, x) {\n      // when hovering over an element, do something\n      el.on('plotly_hover', function(d) {\n\n        // extract tooltip text\n        txt = d.points[0].data.text;\n        // image is stored locally\n        image_location = '../2018-10-28-showing-images-on-hover-in-plotly-with-r/' + txt + '.jpg';\n\n        // define image to be shown\n        var img = {\n          // location of image\n          source: image_location,\n          // top-left corner\n          x: 0,\n          y: 1,\n          sizex: 0.2,\n          sizey: 0.2,\n          xref: 'paper',\n          yref: 'paper'\n        };\n\n        // show image and annotation \n        Plotly.relayout(el.id, {\n            images: [img] \n        });\n      })\n    }\n    \")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-545a7c9893ceb0d78e84\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-545a7c9893ceb0d78e84\">{\"x\":{\"data\":[{\"x\":[5.0999999999999996,4.9000000000000004,4.7000000000000002,4.5999999999999996,5,5.4000000000000004,4.5999999999999996,5,4.4000000000000004,4.9000000000000004,5.4000000000000004,4.7999999999999998,4.7999999999999998,4.2999999999999998,5.7999999999999998,5.7000000000000002,5.4000000000000004,5.0999999999999996,5.7000000000000002,5.0999999999999996,5.4000000000000004,5.0999999999999996,4.5999999999999996,5.0999999999999996,4.7999999999999998,5,5,5.2000000000000002,5.2000000000000002,4.7000000000000002,4.7999999999999998,5.4000000000000004,5.2000000000000002,5.5,4.9000000000000004,5,5.5,4.9000000000000004,4.4000000000000004,5.0999999999999996,5,4.5,4.4000000000000004,5,5.0999999999999996,4.7999999999999998,5.0999999999999996,4.5999999999999996,5.2999999999999998,5],\"y\":[1.3999999999999999,1.3999999999999999,1.3,1.5,1.3999999999999999,1.7,1.3999999999999999,1.5,1.3999999999999999,1.5,1.5,1.6000000000000001,1.3999999999999999,1.1000000000000001,1.2,1.5,1.3,1.3999999999999999,1.7,1.5,1.7,1.5,1,1.7,1.8999999999999999,1.6000000000000001,1.6000000000000001,1.5,1.3999999999999999,1.6000000000000001,1.6000000000000001,1.5,1.5,1.3999999999999999,1.5,1.2,1.3,1.3999999999999999,1.3,1.5,1.3,1.3,1.3,1.6000000000000001,1.8999999999999999,1.3999999999999999,1.6000000000000001,1.3999999999999999,1.5,1.3999999999999999],\"text\":\"setosa\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"opacity\":1,\"size\":5.6692913385826778,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(248,118,109,1)\"}},\"hoveron\":\"points\",\"name\":\"setosa\",\"legendgroup\":\"setosa\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[7,6.4000000000000004,6.9000000000000004,5.5,6.5,5.7000000000000002,6.2999999999999998,4.9000000000000004,6.5999999999999996,5.2000000000000002,5,5.9000000000000004,6,6.0999999999999996,5.5999999999999996,6.7000000000000002,5.5999999999999996,5.7999999999999998,6.2000000000000002,5.5999999999999996,5.9000000000000004,6.0999999999999996,6.2999999999999998,6.0999999999999996,6.4000000000000004,6.5999999999999996,6.7999999999999998,6.7000000000000002,6,5.7000000000000002,5.5,5.5,5.7999999999999998,6,5.4000000000000004,6,6.7000000000000002,6.2999999999999998,5.5999999999999996,5.5,5.5,6.0999999999999996,5.7999999999999998,5,5.5999999999999996,5.7000000000000002,5.7000000000000002,6.2000000000000002,5.0999999999999996,5.7000000000000002],\"y\":[4.7000000000000002,4.5,4.9000000000000004,4,4.5999999999999996,4.5,4.7000000000000002,3.2999999999999998,4.5999999999999996,3.8999999999999999,3.5,4.2000000000000002,4,4.7000000000000002,3.6000000000000001,4.4000000000000004,4.5,4.0999999999999996,4.5,3.8999999999999999,4.7999999999999998,4,4.9000000000000004,4.7000000000000002,4.2999999999999998,4.4000000000000004,4.7999999999999998,5,4.5,3.5,3.7999999999999998,3.7000000000000002,3.8999999999999999,5.0999999999999996,4.5,4.5,4.7000000000000002,4.4000000000000004,4.0999999999999996,4,4.4000000000000004,4.5999999999999996,4,3.2999999999999998,4.2000000000000002,4.2000000000000002,4.2000000000000002,4.2999999999999998,3,4.0999999999999996],\"text\":\"versicolor\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,186,56,1)\",\"opacity\":1,\"size\":5.6692913385826778,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,186,56,1)\"}},\"hoveron\":\"points\",\"name\":\"versicolor\",\"legendgroup\":\"versicolor\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[6.2999999999999998,5.7999999999999998,7.0999999999999996,6.2999999999999998,6.5,7.5999999999999996,4.9000000000000004,7.2999999999999998,6.7000000000000002,7.2000000000000002,6.5,6.4000000000000004,6.7999999999999998,5.7000000000000002,5.7999999999999998,6.4000000000000004,6.5,7.7000000000000002,7.7000000000000002,6,6.9000000000000004,5.5999999999999996,7.7000000000000002,6.2999999999999998,6.7000000000000002,7.2000000000000002,6.2000000000000002,6.0999999999999996,6.4000000000000004,7.2000000000000002,7.4000000000000004,7.9000000000000004,6.4000000000000004,6.2999999999999998,6.0999999999999996,7.7000000000000002,6.2999999999999998,6.4000000000000004,6,6.9000000000000004,6.7000000000000002,6.9000000000000004,5.7999999999999998,6.7999999999999998,6.7000000000000002,6.7000000000000002,6.2999999999999998,6.5,6.2000000000000002,5.9000000000000004],\"y\":[6,5.0999999999999996,5.9000000000000004,5.5999999999999996,5.7999999999999998,6.5999999999999996,4.5,6.2999999999999998,5.7999999999999998,6.0999999999999996,5.0999999999999996,5.2999999999999998,5.5,5,5.0999999999999996,5.2999999999999998,5.5,6.7000000000000002,6.9000000000000004,5,5.7000000000000002,4.9000000000000004,6.7000000000000002,4.9000000000000004,5.7000000000000002,6,4.7999999999999998,4.9000000000000004,5.5999999999999996,5.7999999999999998,6.0999999999999996,6.4000000000000004,5.5999999999999996,5.0999999999999996,5.5999999999999996,6.0999999999999996,5.5999999999999996,5.5,4.7999999999999998,5.4000000000000004,5.5999999999999996,5.0999999999999996,5.0999999999999996,5.9000000000000004,5.7000000000000002,5.2000000000000002,5,5.2000000000000002,5.4000000000000004,5.0999999999999996],\"text\":\"virginica\",\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(97,156,255,1)\",\"opacity\":1,\"size\":5.6692913385826778,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(97,156,255,1)\"}},\"hoveron\":\"points\",\"name\":\"virginica\",\"legendgroup\":\"virginica\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":26.228310502283108,\"r\":7.3059360730593621,\"b\":40.182648401826498,\"l\":31.415525114155255},\"plot_bgcolor\":\"rgba(235,235,235,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[4.1200000000000001,8.0800000000000001],\"tickmode\":\"array\",\"ticktext\":[\"5\",\"6\",\"7\",\"8\"],\"tickvals\":[5,6,7,8],\"categoryorder\":\"array\",\"categoryarray\":[\"5\",\"6\",\"7\",\"8\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Sepal.Length\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.70499999999999996,7.1950000000000003],\"tickmode\":\"array\",\"ticktext\":[\"2\",\"4\",\"6\"],\"tickvals\":[2,4,6],\"categoryorder\":\"array\",\"categoryarray\":[\"2\",\"4\",\"6\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0.66417600664176002,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Petal.Length\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.8897637795275593,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"Species\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"140bb2d699b4c\":{\"x\":{},\"y\":{},\"colour\":{},\"text\":{},\"type\":\"scatter\"}},\"cur_data\":\"140bb2d699b4c\",\"visdat\":{\"140bb2d699b4c\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"\\n    function(el, x) {\\n      // when hovering over an element, do something\\n      el.on('plotly_hover', function(d) {\\n\\n        // extract tooltip text\\n        txt = d.points[0].data.text;\\n        // image is stored locally\\n        image_location = '../2018-10-28-showing-images-on-hover-in-plotly-with-r/' + txt + '.jpg';\\n\\n        // define image to be shown\\n        var img = {\\n          // location of image\\n          source: image_location,\\n          // top-left corner\\n          x: 0,\\n          y: 1,\\n          sizex: 0.2,\\n          sizey: 0.2,\\n          xref: 'paper',\\n          yref: 'paper'\\n        };\\n\\n        // show image and annotation \\n        Plotly.relayout(el.id, {\\n            images: [img] \\n        });\\n      })\\n    }\\n    \",\"data\":null}]}}</script>\n```\n\n:::\n:::\n\n\nTada! Hovering over a point now shows an image of the corresponding species in the top-left corner. Instead of an image, text can also be shown by adding a `text` attribute to the `var img` definition and adding `annotations: [img]` to the `Plotly.relayout` function.  \n\nThis visualisation can now be exported to html with `htmltools::saveWidget()` and shared with anyone, the recipient does not need not have `R` installed. Do make sure to also share the folder with the images though, since these are not embedded.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/plotly-binding-4.10.4/plotly.js\"></script>\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/plotly-basic-2.11.1/plotly-basic-2.11.1.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}