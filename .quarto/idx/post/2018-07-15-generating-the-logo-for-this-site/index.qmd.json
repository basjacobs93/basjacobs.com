{"title":"Generating the logo for this site","markdown":{"yaml":{"title":"Generating the logo for this site","author":"Bas","date":"2018-07-15"},"headingText":"The data","containsRefs":false,"markdown":"\n\nI wanted a logo for my blog. Something kind of personal, but abstract; preferably something that could be drawn with a single path. I decided to download an elevation map of the Netherlands (where I live) to somehow use a plot of that data as my logo. I thought it would be nice to generate a side view and smooth it. In this short post I will discuss how I did it. \n\nThe Netherlands have an open database containing elevation data for the whole country. It is called _Actueel Hoogtebestand Nederland_ (Current Elevation database Netherlands) and can be [viewed online](http://www.ahn.nl/common-nlm/viewer.html). On average, it contains eight height measurements per square meter. The measurements are made using aircraft with LiDAR technology. Measuring the entire country takes sevaral years. In particular, I used the database called AHN2, which contains measurements made from 2007 to 2012. According to the website, 99.7% of the measured points are accurate up to 20 cm.  \nIn the database, the country is divided into a grid of around 1300 cells, each having dimensions of 5x6.25 kilometers. For every cell, the measurements can be downloaded as a zipped GeoTIFF file of around 500 KB. Links to these files can be found in an [Atom feed](http://geodata.nationaalgeoregister.nl/ahn2/atom/ahn2_5m.xml).\n\n![Dividing the Netherlands into around 1100 cells](/post/2018-07-15-generating-the-logo-for-this-site/ahn.png){width=400px}\n\n\n# The code\nObtaining the links to all cells is as easy as reading the contents of the Atom feed and extracting all URLs from it. I chose to extract the URLs using a simple regular expression. Note that in `R` you need to escape the backslash with another backslash.\n```r\nlibrary(tidyverse)\nfeed <- read_file(\"http://geodata.nationaalgeoregister.nl/ahn2/atom/ahn2_5m.xml\")\nlinks <- str_extract_all(feed, \"http[:/.\\\\w]+\\\\.zip\")[[1]] %>% unique\n```\n\nThis results in a vector of 1373 URLs.  \nFor every `url` in this `links` vector, I download its contents into a temporary file, unzip it, read it into memory as a GDAL object, take its maximum over an axis and remove the temporary file again.\n\n``` r\nlibrary(rgdal)\n\n# Create temporary folder to store the files in  \ntemp <- tempfile(fileext = \".zip\")\n# Download the file and unzip it\ndownload.file(url, temp, quiet = TRUE)\nunzip(temp)\n# Obtain .tif files contained in .zip\nshp <- dir(tempdir(), \"*.tif$\")\n\n# Convert to GDAL and project onto axis\ny <- readGDAL(shp, silent = TRUE)\ny <- project(y, axis)\n\n# Remove temporary files\nfile.remove(temp)\nfile.remove(shp)\n```\n\nI wrap this into a function and run it for every url using `plyr::llply()`. I like to use `llply` because it has a progress bar functionality that I find useful when scraping.\nI set `axis` to 2, which means that I take the maximum value over the rows (longitude). In the end, obtain a data frame with 1250 values for every cell (6250 meter cell size, 5 measurements per meter). Since there are multiple cells within a row, I have to group this data frame by latitude and take the maximum over each group to get to the plottable result.  \nPlotting is now an easy task using `ggplot`.\n\n``` r\nggplot(df, aes(x = x, y = elevation)) +\n  geom_line() +\n  theme_void()\n```\n\n![Sideview of the Netherlands](/post/2018-07-15-generating-the-logo-for-this-site/sideview.png){width=400px}\n\nThis plot displays the country as if we were standing in Germany and looking at the Netherlands without the ability to see perspective. There are some weird values here and there, but overall it looks like can be expected. It is too rough to use as a logo; we should apply some smoothing to make it prettier.  \nSmoothing can be done in `ggplot` by simply replacing `geom_line` with `geom_smooth`. Under the hood, this is using using cubic regression splines to smooth the values. This yields a pretty picture better suited for using as a logo.  \n\n``` r\nggplot(df, aes(x = x, y = elevation)) +\n  geom_smooth(se = FALSE) +\n  theme_void()\n```\n![Sideview of the Netherlands when squinting](/post/2018-07-15-generating-the-logo-for-this-site/sideview_smooth.png){width=400px}\n\n# Conclusion\nThat's it! Once you have an idea, creating your own logo can be a couple of lines of code away.  \nThe complete `R` code used can be viewed on my [Github](https://github.com/basjacobs93/limosalogo).\n","srcMarkdownNoYaml":"\n\nI wanted a logo for my blog. Something kind of personal, but abstract; preferably something that could be drawn with a single path. I decided to download an elevation map of the Netherlands (where I live) to somehow use a plot of that data as my logo. I thought it would be nice to generate a side view and smooth it. In this short post I will discuss how I did it. \n\n# The data\nThe Netherlands have an open database containing elevation data for the whole country. It is called _Actueel Hoogtebestand Nederland_ (Current Elevation database Netherlands) and can be [viewed online](http://www.ahn.nl/common-nlm/viewer.html). On average, it contains eight height measurements per square meter. The measurements are made using aircraft with LiDAR technology. Measuring the entire country takes sevaral years. In particular, I used the database called AHN2, which contains measurements made from 2007 to 2012. According to the website, 99.7% of the measured points are accurate up to 20 cm.  \nIn the database, the country is divided into a grid of around 1300 cells, each having dimensions of 5x6.25 kilometers. For every cell, the measurements can be downloaded as a zipped GeoTIFF file of around 500 KB. Links to these files can be found in an [Atom feed](http://geodata.nationaalgeoregister.nl/ahn2/atom/ahn2_5m.xml).\n\n![Dividing the Netherlands into around 1100 cells](/post/2018-07-15-generating-the-logo-for-this-site/ahn.png){width=400px}\n\n\n# The code\nObtaining the links to all cells is as easy as reading the contents of the Atom feed and extracting all URLs from it. I chose to extract the URLs using a simple regular expression. Note that in `R` you need to escape the backslash with another backslash.\n```r\nlibrary(tidyverse)\nfeed <- read_file(\"http://geodata.nationaalgeoregister.nl/ahn2/atom/ahn2_5m.xml\")\nlinks <- str_extract_all(feed, \"http[:/.\\\\w]+\\\\.zip\")[[1]] %>% unique\n```\n\nThis results in a vector of 1373 URLs.  \nFor every `url` in this `links` vector, I download its contents into a temporary file, unzip it, read it into memory as a GDAL object, take its maximum over an axis and remove the temporary file again.\n\n``` r\nlibrary(rgdal)\n\n# Create temporary folder to store the files in  \ntemp <- tempfile(fileext = \".zip\")\n# Download the file and unzip it\ndownload.file(url, temp, quiet = TRUE)\nunzip(temp)\n# Obtain .tif files contained in .zip\nshp <- dir(tempdir(), \"*.tif$\")\n\n# Convert to GDAL and project onto axis\ny <- readGDAL(shp, silent = TRUE)\ny <- project(y, axis)\n\n# Remove temporary files\nfile.remove(temp)\nfile.remove(shp)\n```\n\nI wrap this into a function and run it for every url using `plyr::llply()`. I like to use `llply` because it has a progress bar functionality that I find useful when scraping.\nI set `axis` to 2, which means that I take the maximum value over the rows (longitude). In the end, obtain a data frame with 1250 values for every cell (6250 meter cell size, 5 measurements per meter). Since there are multiple cells within a row, I have to group this data frame by latitude and take the maximum over each group to get to the plottable result.  \nPlotting is now an easy task using `ggplot`.\n\n``` r\nggplot(df, aes(x = x, y = elevation)) +\n  geom_line() +\n  theme_void()\n```\n\n![Sideview of the Netherlands](/post/2018-07-15-generating-the-logo-for-this-site/sideview.png){width=400px}\n\nThis plot displays the country as if we were standing in Germany and looking at the Netherlands without the ability to see perspective. There are some weird values here and there, but overall it looks like can be expected. It is too rough to use as a logo; we should apply some smoothing to make it prettier.  \nSmoothing can be done in `ggplot` by simply replacing `geom_line` with `geom_smooth`. Under the hood, this is using using cubic regression splines to smooth the values. This yields a pretty picture better suited for using as a logo.  \n\n``` r\nggplot(df, aes(x = x, y = elevation)) +\n  geom_smooth(se = FALSE) +\n  theme_void()\n```\n![Sideview of the Netherlands when squinting](/post/2018-07-15-generating-the-logo-for-this-site/sideview_smooth.png){width=400px}\n\n# Conclusion\nThat's it! Once you have an idea, creating your own logo can be a couple of lines of code away.  \nThe complete `R` code used can be viewed on my [Github](https://github.com/basjacobs93/limosalogo).\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"html-math-method":"katex","output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.7.33","theme":["cosmo","brand"],"title":"Generating the logo for this site","author":"Bas","date":"2018-07-15"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}